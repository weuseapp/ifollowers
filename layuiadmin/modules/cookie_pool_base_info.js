/** layui-admin.std-v1.4.0 LPPL License By https://www.layui.com/layuiadmin/ */
 ;"use strict";layui.define("op_common",function(e){function t(e,t){var a=void 0,i=void 0,n=void 0,r=void 0;return a=e.split("-"),i=new Date(a[1]+"-"+a[2]+"-"+a[0]),a=t.split("-"),n=new Date(a[1]+"-"+a[2]+"-"+a[0]),r=Math.abs(i-n)/1e3/60/60/24,parseInt(r)}var a=layui.api.cookie_pool_base_info,i=layui.api.cookie_pool_top_search,n=layui.api.cookie_pool_echarts_info;ajaxRequestV2(a,"get",{},function(a){return 0!==a.code?void layer.msg(a.msg,{icon:2}):(layui.use("laytpl",function(){var e=layui.laytpl;e(base_info_tpl.innerHTML).render(a.data.base_info,function(e){document.getElementById("base_info_view").innerHTML=e}),e(today_use_rate_tpl.innerHTML).render(a.data.today_use_rate,function(e){document.getElementById("today_use_rate_view").innerHTML=e}),e(effect_report_tpl.innerHTML).render(a.data.effect_report,function(e){document.getElementById("effect_report_view").innerHTML=e}),e(monitor_tpl.innerHTML).render(a.data.monitor,function(e){document.getElementById("monitor_view").innerHTML=e})}),layui.use(["admin","carousel"],function(){var e=layui.$,t=layui.carousel,a=layui.element,i=layui.device();e(".layadmin-carousel").each(function(){var a=e(this);t.render({elem:this,width:"100%",arrow:"none",interval:a.data("interval"),autoplay:a.data("autoplay")===!0,trigger:i.ios||i.android?"click":"hover",anim:a.data("anim")})}),a.render("progress")}),layui.use(["admin","carousel","echartsTheme","laydate"],function(){var e=a.data.chats.get_user_info,i=Object.keys(e[-1]),r=layui.$,o=layui.admin,l=layui.carousel,s=window.echarts,d=layui.laydate,u=[],c=[{tooltip:{trigger:"axis"},legend:{data:["前天","昨天","今天"]},xAxis:[{name:"UTC 时区",type:"category",boundaryGap:!1,data:i}],yAxis:[{name:"访问用户主页次数",type:"value"}],markLine:{symbol:["none","none"],label:{show:!1},data:[{xAxis:1},{xAxis:3},{xAxis:5},{xAxis:7}]},series:[{name:"前天",type:"line",smooth:!0,itemStyle:{normal:{areaStyle:{type:"default"}}},data:e[-2]?Object.values(e[-2]):[]},{name:"昨天",type:"line",smooth:!0,itemStyle:{normal:{areaStyle:{type:"default"}}},data:e[-1]?Object.values(e[-1]):[]},{name:"今天",type:"line",smooth:!0,itemStyle:{normal:{areaStyle:{type:"default"}}},data:e[0]?Object.values(e[0]):[]}]}],y=r("#LAY-index-dataview").children("div"),m=function(e){u[e]=s.init(y[e],layui.echartsTheme),u[e].setOption(c[e]),o.resize(function(){u[e].resize()})};if(d.render({elem:"#test-laydate-format-range1",range:"~",value:"",min:-6,max:0,done:function(e){var a=e.split("~");return a[0]=a[0].trim(),a[1]=a[1].trim(),t(a[1],a[0])>7?(layer.msg("日期范围不能超过7天，且最大日期为今天",{icon:7}),!1):void ajaxRequestV2(n,"get",{start_date:a[0],end_date:a[1]},function(e){if(0!==e.code)return layer.msg(e.msg||"请求失败",{icon:2}),!1;var t=e.data||!1;if(!t)return layer.msg("返回数据异常",{icon:2}),!1;if(!t.hasOwnProperty("chats")||!t.chats.hasOwnProperty("get_user_info"))return layer.msg("返回数据异常",{icon:2}),!1;var a=[];layui.each(t.chats.get_user_info,function(e,t){a.push({name:e,type:"line",smooth:!0,itemStyle:{normal:{areaStyle:{type:"default"}}},data:t?Object.values(t):[]})});var i=0;c[i].legend.data=t.chats.get_user_info?Object.keys(t.chats.get_user_info):[],c[i].series=a,u[i].setOption(c[i],!0)})}}),y[0]){m(0);var f=0;l.on("change(LAY-index-dataview)",function(e){m(f=e.index)}),o.on("side",function(){setTimeout(function(){m(f)},300)}),o.on("hash(tab)",function(){layui.router().path.join("")||m(f)})}}),layui.use(["table","laydate"],function(){var e=layui.$,t=layui.table,a=layui.form;t.render({elem:"#LAY-index-topSearch",url:i,page:!0,headers:{token:layui.data(layui.setter.tableName).user.token},parseData:function(e){return checkApiStatusByData(e),getListsFormatByData(e)},cols:[[{field:"keywords",title:"关键词",minWidth:300,templet:'<div><a href="https://www.instagram.com/{{ d.keywords }}" target="_blank" class="layui-table-link">{{ d.keywords }}</a></div>'},{field:"frequency",title:"搜索次数",minWidth:120,sort:!0}]],skin:"line"});var n=function(e){renderSelect("tableDate","date",e.date,0),a.render("select")},r=t.render({elem:"#LAY-index-historyTopSearch",url:i,page:!0,headers:{token:layui.data(layui.setter.tableName).user.token},parseData:function(e){return checkApiStatusByData(e),getListsFormatByData(e)},cols:[[{field:"keywords",title:"关键词",minWidth:300,templet:'<div><a href="https://www.instagram.com/{{ d.keywords }}" target="_blank" class="layui-table-link">{{ d.keywords }}</a></div>'},{field:"frequency",title:"搜索次数",minWidth:120,sort:!0}]],skin:"line",done:function(e){n(e["extends"])}});a.on("select(date)",function(t){var a=e(this).text();t.value||(a=!1),r.reload({where:a?{date:a}:null,page:{curr:1},done:function(){}})})}),void e("cookie_pool_base_info",{}))})});