/** layui-admin.std-v1.4.0 LPPL License By https://www.layui.com/layuiadmin/ */
 ;"use strict";layui.define(["op_common","table","form","laydate","echartsTheme"],function(e){function a(e){var a=d.init(u,f);if(e)if(_.xAxis.data=e.date_rang?e.date_rang:[],0===e.chart_data.length)for(var i in _.series)_.series[i].data=[];else _.series=e.chart_data;a.setOption(_),t.resize(function(){a.resize()})}var t=layui.admin,i=layui.table,n=layui.form,l=layui.laydate,d=window.echarts,r=layui.api.analysis_get_flow_analysis,s={},o=i.render({elem:"#lists",url:r,headers:{token:layui.data(layui.setter.tableName).user.token},parseData:function(e){return s=e.data["extends"],checkApiStatusByData(e),a(e.data),getListsFormatByData(e)},cols:[[{field:"app_name",title:"应用",minWidth:120,templet:function(e){if(!e.app_id)return e.app_name;var a=s.apps[e.app_id];return void 0!==a?a:"应用已删除"}},{field:"pur_coin_total",title:"内购金币订单数"},{field:"pur_coin_earn",title:"内购金币总额"},{field:"pur_task_total",title:"内购任务数"},{field:"pur_task_earn",title:"内购任务总额"},{field:"coin_task_total",title:"金币任务数"},{field:"coin_task_cost",title:"金币任务消耗"},{field:"pur_coin_issue",title:"内购金币发行量",width:130},{field:"other_coin_issue",title:"其它金币发行量",width:130},{field:"coin_issue",title:"金币总发行量"},{field:"coin_cost",title:"金币总消耗"},{field:"price_earn",title:"内购总额"},{field:"date",title:"统计日期",sort:!0,width:110}]],limit:1e3,done:function(e){i.cache["extends"]=e["extends"],renderSelectV2("app_id","app_id",e["extends"].apps,null,"全部"),n.render()}});n.on("submit(search)",function(e){o.reload({where:e.field,page:{curr:1},done:null})}),l.render({elem:"#range_at",range:"~",trigger:"click",max:-1,done:function(e){var a={start_date:"",end_date:""};if(!e)return void n.val("form",a);var t=e.split(" ~ ");return 2!==t.length?(n.val("form",a),void layer.msg("时间格式有误，请检查",{icon:5})):(a.start_date=t[0],a.end_date=t[1],void n.val("form",a))}});var u=document.getElementById("LAY-index-dataview"),m=[{name:"内购总额",value:!0},{name:"内购金币订单数",value:!1},{name:"内购金币总额",value:!1},{name:"内购任务数",value:!1},{name:"内购任务总额",value:!1},{name:"金币任务数",value:!1},{name:"金币任务消耗",value:!1},{name:"内购金币发行量",value:!1},{name:"其它金币发行量",value:!1},{name:"金币总发行量",value:!1},{name:"金币总消耗",value:!1}],p={legend_data:{}};for(var c in m)m.hasOwnProperty(c)&&(p.legend_data[m[c].name]=m[c].value);var _={title:{text:"App 流水统计"},tooltip:{trigger:"axis"},legend:{data:p.legend_data?Object.keys(p.legend_data):[],selected:p.legend_data},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1},yAxis:{type:"value"},series:[{name:"内购总额",type:"line",data:[]},{name:"内购金币订单数",type:"line",data:[]},{name:"内购金币总额",type:"line",data:[]},{name:"内购任务数",type:"line",data:[]},{name:"内购任务总额",type:"line",data:[]},{name:"金币任务数",type:"line",data:[]},{name:"金币任务消耗",type:"line",data:[]},{name:"内购金币发行量",type:"line",data:[]},{name:"其它金币发行量",type:"line",data:[]},{name:"金币总发行量",type:"line",data:[]},{name:"金币总消耗",type:"line",data:[]}]},f=layui.echartsTheme;f.line.smooth=!1,t.on("side",function(){setTimeout(function(){a()},300)}),e("analysis_flow",{})});