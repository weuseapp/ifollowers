/** layui-admin.std-v1.4.0 LPPL License By https://www.layui.com/layuiadmin/ */
 ;"use strict";layui.define(["table","form","op_common"],function(t){function e(){setCacheData("apiLists",d),setCacheData("apiCreate",u),setCacheData("apiUpdate",c),setCacheData("apiDetails",p)}function a(t){var e=!0,a=!1,i=void 0;try{for(var l,s=t[Symbol.iterator]();!(e=(l=s.next()).done);e=!0){var r=l.value;n.suite("#layuidropdown_"+r.id,{data:r})}}catch(o){a=!0,i=o}finally{try{!e&&s["return"]&&s["return"]()}finally{if(a)throw i}}}var i=layui.$,n=layui.dropdown,l=layui.op_common,s=layui.table,r=layui.form,o=getUrlParams(location.search),d=layui.api.tasks_get_task_lists+"?user_id="+o.user_id,u=layui.api.tasks_create_task,c=layui.api.tasks_update_task,p=layui.api.tasks_task_detail,_=layui.api.tasks_transfer_third;i(".op-methods").on("click",function(t){e(),window.data=t.data;var a=i(this).data("type");window[a]?window[a].call(this,t.data,s.cache["extends"]):""}),s.on("tool(lists)",function(t){e(),window.data=t.data;var a=t.event;window[a]?window[a].call(this,t.data,s.cache["extends"]):""});var f=layui.opTable.render({elem:"#lists",url:d,headers:{token:layui.data(layui.setter.tableName).user.token},toolbar:!0,defaultToolbar:["filter"],parseData:function(t){return window.parent.listData=t,checkApiStatusByData(t),getListsFormatByData(t)},cols:[[{field:"id",width:90,title:"ID",sort:!0},{field:"is_paid_user",title:"付费用户",align:"center",templet:function(t){return 1===t.is_paid_user?'<span class="layui-badge layui-bg-blue">是</span>':'<span class="layui-badge layui-bg-gray">否</span>'}},{field:"type",title:"任务类型",templet:"#tpl_type"},{field:"total",title:"任务数"},{field:"state",title:"完成状态",width:90,templet:"#tpl_state",align:"center"},{field:"pic",title:"完成数量",width:90,templet:function(t){return t.finished<=0?t.finished+t.finished_third+t.finished_manual:t.finished}},{field:"finished_at",title:"完成时间",sort:!0,width:160,templet:function(t){return"0000-00-00 00:00:00"===t.finished_at?"未完成":changeUTCTime(t.finished_at)}},{field:"created_at",title:"创建时间",sort:!0,width:160,templet:function(t){return changeUTCTime(t.created_at)}},{title:"操作",width:140,align:"left",fixed:"right",toolbar:"#options"}]],openCols:[{field:"app_name",title:"应用"},{field:"username",title:"IG用户名",templet:function(t){return'<span class="opTable-item-title">IG用户名：</span>\n                            <a href="//instagram.com/'+t.username+'" class="layui-badge" target="_blank" title="打开主页">'+t.username+"</a>"}},{field:"related",title:"关联用户/帖子",templet:function(t){var e='<span class="opTable-item-title">关联用户/帖子：</span>',a="暂无";return 1===t.type||3===t.type?t.link_short&&(a='<a href="//instagram.com/p/'+t.link_short+'" class="layui-badge" target="_blank" title="打开帖子">'+t.link_short+"</a>"):2===t.type&&t.username&&(a='<a href="//instagram.com/'+t.username+'" class="layui-badge layui-bg-blue" target="_blank" title="打开帖子">'+t.username+"</a>"),e+a}}],page:!0,limit:20,done:function(t){s.cache["extends"]=t["extends"],initSearchInput(t["extends"]),a(t.data)}});r.on("submit(search)",function(t){e(),window.data=t.data,f.reload({where:l.verifyField(t.field),page:{curr:1},done:function(e){initSearchInput(e["extends"],t.field),a(e.data)}})}),window.initSearchInput=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};renderSelect("app_id","app_id",t.apps,e.app_id),renderSelect("type","type",t.type,e.type),renderSelect("state","state",t.state,e.state),r.render()},window.process=function(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;comfirmOperate(c,{id:t.id,state:layui["const"].STATE_PROCESS})},window.finished=function(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;comfirmOperate(c,{id:t.id,state:layui["const"].STATE_FINISH})},window.stop=function(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;comfirmOperate(c,{id:t.id,state:layui["const"].STATE_STOP})},window.cancel=function(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;comfirmOperate(c,{id:t.id,state:layui["const"].STATE_CANCEL})},window.transfer_third=function(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;comfirmOperate(_,{id:t.id,state:layui["const"].STATE_STOP})},t("tasks",{}),t("const",{STATE_CANCEL:-2,STATE_STOP:-1,STATE_PROCESS:0,STATE_FINISH:1,STATE_PARTIAL:2,TYPE_LIKES:1,TYPE_FOLLOWER:2,TYPE_VIEW:3,TYPE_GOLD_FOLLOWER:4,MEDIA_TYPE_SINGLE_PICTURE:1,MEDIA_TYPE_SINGLE_VIDEO:2,MEDIA_TYPE_HYBRID_MUTABLE:3,MEDIA_TYPE_IGTV:4}),t("options_menu",{menus:[{layIcon:"layui-icon-username",txt:"个人中心",event:"usercenter"},{layIcon:"layui-icon-set",txt:"设置",event:"set"},{layIcon:"layui-icon-logout",txt:"退出登录",event:"loginout"}]})});