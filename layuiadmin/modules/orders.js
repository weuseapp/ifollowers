/** layui-admin.std-v1.4.0 LPPL License By https://www.layui.com/layuiadmin/ */
 ;"use strict";layui.define(["table","form","op_common"],function(e){function t(){setCacheData("apiLists",d),setCacheData("apiCreate",p),setCacheData("apiUpdate",o),setCacheData("apiDelete",u)}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};renderSelect("app_id","app_id",e.apps,t.app_id),renderSelect("type","type",e.type,t.type),renderSelect("platform","platform",e.platform,t.platform),renderSelect("status","status",e.status,t.status),renderSelect("is_handle","is_handle",e.is_handle,t.is_handle),renderSelect("is_sanbox","is_sanbox",e.is_sanbox,t.is_sanbox),renderSelect("currency","currency",e.currency,t.currency),renderSelect("pay_form","pay_form",e.pay_form,t.pay_form),n.render()}var i=layui.$,l=layui.op_common,s=layui.table,n=layui.form,r=getUrlParams(location.search),d=layui.api.orders_get_order_lists,p=layui.api.user_create_admin,o=layui.api.user_update_admin,u=layui.api.user_delete_admin;i(".op-methods").on("click",function(e){t(),window.data=e.data;var a=i(this).data("type");window[a]?window[a].call(this,e.data,s.cache["extends"]):""}),s.on("tool(lists)",function(e){t(),window.data=e.data;var a=e.event;window[a]?window[a].call(this,e.data,s.cache["extends"]):""}),window.user=function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;layer.open({type:2,title:"用户",content:layui.setter.vhtml+"user/user/list.html?user_id="+e.user_id,maxmin:!0,area:["70%","70%"]})};var c=layui.opTable.render({elem:"#lists",url:d,headers:{token:layui.data(layui.setter.tableName).user.token},parseData:function(e){return window.parent.listData=e,checkApiStatusByData(e),getListsFormatByData(e)},toolbar:!0,defaultToolbar:["filter","exports"],cols:[[{field:"id",title:"ID",sort:!0},{field:"order_sn",width:150,title:"订单号"},{field:"name",title:"标题"},{field:"user_id",title:"用户",templet:"#tpl_user"},{field:"price",width:90,title:"价格"},{field:"total",width:90,title:"购买数量"},{field:"platform",width:90,title:"支付来源",templet:"#tpl_platform",align:"center"},{field:"currency",width:90,title:"支付货币",templet:"#tpl_currency",align:"center"},{field:"status",width:80,title:"状态",templet:"#tpl_status",align:"center"},{field:"is_handle",width:90,title:"是否处理",templet:"#tpl_is_handle",align:"center"},{field:"is_push",width:90,title:"是否推送",templet:"#tpl_is_push",align:"center"},{field:"created_at",width:160,title:"创建时间",sort:!0,templet:function(e){return changeUTCTime(e.created_at)}}]],openColumnIndex:0,openCols:[{field:"app_name",title:"应用名称",templet:function(e){var t='<span class="opTable-item-title">应用名称：</span>',a=parent.listData.data["extends"].apps[e.app_id];return t+('<span class="opTable-exp-value">'+(void 0!==a?a:"未知")+"</span>")}},{field:"user_id",title:"用户ID"},{field:"pay_form",title:"支付方式",templet:function(e){var t='<span class="opTable-item-title">支付方式：</span>',a="未知";return 0===e.pay_form?a="未知":1===e.pay_form?a="平台币":2===e.pay_form?a="苹果内购":3===e.pay_form?a="谷歌内购":4===e.pay_form?a="Stripe":5===e.pay_form&&(a="PayPal"),t+('<span class="opTable-exp-value">'+a+"</span>")}},{field:"type",title:"商品类型",templet:function(e){var t='<span class="opTable-item-title">商品类型：</span>';return e.type===layui["const"].TYPE_TASK?t+'<span class="layui-badge layui-bg-blue">任务</span>':e.type===layui["const"].TYPE_COINS?t+'<span class="layui-badge layui-bg-blue">金币</span>':t+'<span class="layui-badge layui-bg-blue">任务</span>'}},{field:"is_sanbox",title:"是否沙盒",templet:function(e){var t='<span class="opTable-item-title">是否沙盒：</span>';return 1===e.is_sanbox?t+'<span class="layui-badge layui-bg-blue">是</span>':t+'<span class="layui-badge layui-bg-gray">否</span>'}}],page:!0,where:r.user_id?{user_id:r.user_id}:{},limit:20,done:function(e){s.cache["extends"]=e["extends"],a(e["extends"])}});n.on("submit(search)",function(e){t(),window.data=e.data,r.user_id&&(e.field.user_id=r.user_id),e.field.username&&!isNaN(parseInt(e.field.username))&&(e.field.user_id=e.field.username,delete e.field.username),c.reload({where:l.verifyField(e.field),page:{curr:1},done:function(){}})}),e("orders",{}),e("const",{STATUS_NORMAL:0,STATUS_FAILED:1,STATUS_PROCESS:2,TYPE_UNKNOWN:0,TYPE_TASK:1,TYPE_COINS:2,PAY_FORM_UNKNOWN:0,PAY_FORM_WEUSE:1,PAY_FORM_APPLE:2,PAY_FORM_GOOGLE:3,PLATFORM_UNKNOWN:0,PLATFORM_WEUSE:1,PLATFORM_APPLE:2,PLATFORM_GOOGLE:3,PLATFROM_PAYPAL:4,CURRENCY_DOLLAR:1,CURRENCY_COINS:2})});