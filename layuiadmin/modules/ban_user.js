/** layui-admin.std-v1.4.0 LPPL License By https://www.layui.com/layuiadmin/ */
 ;"use strict";layui.define(["table","form","op_common"],function(e){var t=layui.$,i=(layui.admin,layui.table),a=layui.form,n=layui.api.user_ban;a.on("submit(search)",function(e){window.data=e.data,i.reload("lists",{where:e.field,page:{curr:1},done:function(e){}})}),t(".op-methods").on("click",function(e){window.data=e.data;var a=t(this).data("type");window[a](e.data,i.cache["extends"])}),i.on("tool(lists)",function(e){window.data=e.data,window[e.event]?window[e.event].call(this,e.data,i.cache["extends"]):""}),i.render({elem:"#lists",url:n,headers:{token:layui.data(layui.setter.tableName).user.token},parseData:function(e){return window.parent.listData=e,checkApiStatusByData(e),getListsFormatByData(e)},cols:[[{type:"checkbox",fixed:"left"},{field:"id",width:100,title:"ID",sort:!0},{field:"username",title:"用户名"},{field:"ip",title:"IP"},{field:"device_id",title:"设备号"},{field:"parent_id",title:"父级ID"},{field:"level",title:"分级等级"},{field:"created_at",title:"创建时间",sort:!0,width:170,templet:function(e){return changeUTCTime(e.created_at)}},{title:"操作",width:120,align:"center",fixed:"right",toolbar:"#options"}]],page:!0,limit:20,done:function(e){}}),window.update=function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;layer.open({type:2,title:"编辑",content:"disable-ig-form.html?id="+e.id,maxmin:!0,area:["70%","50%"],btn:["确定","取消"],yes:debounce(function(e){var t=e[0],a=e[1],l=window["layui-layer-iframe"+t].layui.form,o=a.find("iframe").contents().find("#submit");l.on("submit(submit)",function(e){var a=e.field;for(var l in a)parent.window.parent["edit_"+l]&&a.hasOwnProperty(l)&&(a[l]=window["layui-layer-iframe"+t].layui.layedit.getContent(parent.window.parent["edit_"+l])),a.hasOwnProperty(l)&&checkIsDateFormat(a[l])&&(a[l]=changeUTCTime(a[l],!0));ajaxRequest(n+"/"+a.id,"put",a,!1),layer.msg("已更新",{icon:1,time:1e3}),layer.close(t),i.reload("lists")}),o.trigger("click")},1e3,!0),success:function(e){var i=e.find("iframe")[0].contentWindow,a=getUrlParams(i.location.search),l=a.id,o=ajaxRequest(n+"/"+l,"GET",{},!1).responseJSON;0!==o.code&&layer.msg("请求数据失败："+o.msg,{icon:2,time:1e3}),t.each(o.data,function(i,a){var n="[name="+i+"]";if(length=e.find("iframe").contents().find(n).length,0===length)return!0;var l=e.find("iframe").contents().find(n);if(html=l.prop("outerHTML"),html.search(/radio/i)>0){var o=t(":radio[name='"+i+"'][value='"+a+"']");o.next().click()}else if(html.search(/checkbox/i)>0){var r=t(":checkbox[name='"+i+"'][value='"+a+"']");r.next().click()}else html.search(/img/i)>0?l.attr("src",a):html.search(/input/i)>0&&html.search(/(text|hidden)/i)>0?l.val(a):l.text(a)})}})},window.create=function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;layer.open({id:"create",type:2,title:"添加",content:"disable-ig-form.html",maxmin:!0,area:["70%","35%"],btn:["确定","取消"],yes:debounce(function(e){var t=e[0],a=e[1],l=window["layui-layer-iframe"+t],o="submit",r=a.find("iframe").contents().find("#"+o);l.layui.form.on("submit("+o+")",function(e){var a=ajaxRequest(n,"post",e.field,!1).responseJSON;0!==a.code?layer.msg("创建失败："+a.msg,{icon:2,time:1e3}):(layer.msg("已创建",{icon:1,time:1e3}),layer.close(t),i.reload("lists"))}),r.trigger("click")},1e3,!0)})},window.deleteOne=function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;layer.confirm("确定删除",function(t){var a=ajaxRequest(n+"/"+e.id,"DELETE",{},!1).responseJSON;0!==a.code?layer.msg("删除失败："+a.msg,{icon:2,time:1e3}):(layer.msg("已删除",{icon:1,time:1e3}),layer.close(t),i.reload("lists"))})},window.deleteMulti=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i.checkStatus("lists").data);return 0===t.length?layer.msg("请选择数据"):void layer.confirm("确定删除吗？",function(e){var a=t.map(function(e){return e.id}),l=ajaxRequest(n,"DELETE",{ids:a},!1).responseJSON;0!==l.code?layer.msg("删除失败："+l.msg,{icon:2,time:1e3}):(layer.msg("已删除",{icon:1,time:1e3}),layer.close(e),i.reload("lists"))})},e("ban_user"),e("const",{STATUS_LOCK:0,STATUS_NORMAL:1,TYPE_IG:1,TYPE_MEGALIKE_PC:2,PLATFORM_UNKNOWN:0,PLATFORM_PC:1,PLATFORM_APPLE:2,PLATFORM_ANDROID:3,PLATFORM_WEUSE:4})});