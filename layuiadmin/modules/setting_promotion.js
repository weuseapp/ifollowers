/** layui-admin.std-v1.4.0 LPPL License By https://www.layui.com/layuiadmin/ */
 ;"use strict";layui.define(["table","form","op_common"],function(t){function e(){setCacheData("apiLists",l),setCacheData("apiCreate",o),setCacheData("apiUpdate",s),setCacheData("apiDelete",r),setCacheData("apiDetails",d),setCacheData("apiApps",c)}var a=layui.$,i=(layui.admin,layui.table),n=layui.form,l=(getUrlParams(location.search),layui.api.promotion_get_lists),o=layui.api.promotion_create_lists,s=layui.api.promotion_get_lists,d=layui.api.promotion_get_details_lists,r=layui.api.promotion_delete_lists,c=layui.api.select_app_name;n.on("submit(search)",function(t){e(),window.data=t.data,i.reload("lists",{where:t.field,page:{curr:1},done:function(e){initSearchInput(e["extends"],t.field)}})}),a(".op-methods").on("click",function(t){e(),window.data=t.data,window[a(this).data("type")](t.data,i.cache["extends"])}),i.on("tool(lists)",function(t){e(),window.data=t.data,window[t.event](t.data,i.cache["extends"])}),i.render({elem:"#lists",url:l,headers:{token:layui.data(layui.setter.tableName).user.token},parseData:function(t){var e=ajaxRequest(c,"GET",{},!1);return t.data["extends"]=e.data,window.parent.listData=t,checkApiStatusByData(t),getNewListsFormatByData(t)},cols:[[{type:"checkbox",fixed:"left"},{field:"id",title:"ID",width:70},{field:"avatar",title:"头像",width:100,align:"center",templet:function(t){layui.setter.apiUrl;return"<img name='tpl_images' style=\"display: inline-block; width: 50%; height: 100%;\" src="+t.logo+">"}},{field:"title",title:"标题",minWidth:100},{field:"description",title:"描述",minWidth:100},{field:"platform",title:"平台",minWidth:100,templet:function(t){return'<span class="layui-badge layui-bg-cyan">'+t.platform+"</span>"}},{field:"coin",title:"金币数",minWidth:100},{field:"status",title:"状态",templet:"#tpl_status"},{field:"created_at",title:"创建时间",sort:!0,templet:function(t){return changeUTCTime(t.created_at)}},{field:"updated_at",title:"更新时间",sort:!0,templet:function(t){return changeUTCTime(t.updated_at)}},{title:"操作",width:120,align:"center",fixed:"right",toolbar:"#options"}]],page:!0,limit:20,done:function(t){fixedTableHeight("#lists"),i.cache["extends"]=t["extends"],initSearchInput(t["extends"])}}),initSearchInput=function(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.render()},t("setting_promotion",{}),t("const",{TYPE_PURCHASE:1,TYPE_PAYPAL:2,STATUS_DELETE:0,STATUS_NORMAL:1,STATUS_PENDING:2,PLATFORM_IOS:"iOS",PLATFORM_ANDROID:"Android",PLATFORM_H5:"H5"})});