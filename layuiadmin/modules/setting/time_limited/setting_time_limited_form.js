/** layui-admin.std-v1.4.0 LPPL License By https://www.layui.com/layuiadmin/ */
 ;"use strict";layui.define(["table","form","op_common","laydate","transfer"],function(e){function t(e){return Array.from(new Set(e.sort()))}function r(e){var t=new Date(e),r=t.getDay(),a=[0,1,2,3,4,5,6];return a[r]}function a(e){var t=e.split("-");return new Date(t[0],parseInt(t[1])-1,t[2])}function n(e,n){for(var i=[],o=a(e),l=a(n);l.getTime()-o.getTime()>=0;){var u=o.getFullYear(),d=1===o.getMonth().toString().length?"0"+o.getMonth().toString():o.getMonth(),s=1===o.getDate().toString().length?"0"+o.getDate():o.getDate(),f=u+"-"+(parseInt(d)+1)+"-"+s;i.push(r(f)),o.setDate(o.getDate()+1)}return t(i)}function i(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];l("input[lay-filter=week]").prop({disabled:!0,checked:!1});var r=!0,a=!1,n=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var u=i.value;l("input[lay-filter=week][value="+u+"]").prop({disabled:!1,checked:t})}}catch(s){a=!0,n=s}finally{try{!r&&o["return"]&&o["return"]()}finally{if(a)throw n}}d.render("checkbox")}function o(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments[2],a=arguments[3];if(!e)return i([],!1),!1;var o=[];if("string"==typeof e){var l=e.split(" - ");o=n(l[0],l[1])}else e instanceof Array&&(o=e);if(i(o,t),!r)return!0;var u={},s=!0,f=!1,p=void 0;try{for(var g,v=o[Symbol.iterator]();!(s=(g=v.next()).done);s=!0){var c=g.value;u["week["+c+"]"]=r["week["+c+"]"]}}catch(h){f=!0,p=h}finally{try{!s&&v["return"]&&v["return"]()}finally{if(f)throw p}}return a&&u&&d.val(a,u),!0}var l=layui.$,u=layui.laydate,d=layui.form,s=layui.transfer,f=window.a_data.data,p=window.a_data.extend,g=isEmpty(f)?[]:f.app_id.split(","),v=l("#range_at"),c=l("#elem_range_at"),h="setting-form-time-limited",y=0,_=!0,m={elem:"#range_at",range:!0,trigger:"click",done:function(e){f?o(e,!1,f,h):o(e,!0)}};if(f){var w={id:f.id,title:f.title,status:f.status,app_id:f.app_id,type:f.type,sort:f.sort};f.range_at&&(w.range_at=f.range_at),f.hour_range&&(w.hour_range=f.hour_range),y=parseInt(f.type),0===y?f.range_at&&o(f.range_at,!1,f,h):1===y&&o([0,1,2,3,4,5,6],!0,f,h),d.val(h,w)}else i([],!1);1===y?(c.hide(),v.attr("disabled",!0)):(c.show(),v.attr("disabled",!1)),u.render(m);var k={elem:"#hour_range",type:"time",range:!0,trigger:"click",format:"HH:mm:ss",done:function(e,t,r){if(!e)return void(_=!0);var a=3600*t.hours+60*t.minutes+t.seconds,n=3600*r.hours+60*r.minutes+r.seconds;return a>=n?void(_=!1):void(_=!0)}};u.render(k),d.verify({week:function(e,t){if(0===l(t).find("input:checked").length)return"请选择星期"},range_at:function(e){if(!e&&0===y)return"请选择时间范围"},hour_range:function(){if(!_)return"时间范围不合法"}}),d.render();var b=[];for(var D in p.apps)p.apps.hasOwnProperty(D)&&b.push({value:D,title:p.apps[D]});s.render({elem:"#app_ids",title:["候选应用","已选应用"],showSearch:!0,width:260,data:b,value:g,id:"app_ids",onchange:function(){var e=s.getData("app_ids"),t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(e[r].value);l("#app_id").val(t.join(","))}}),d.on("radio(type)",function(e){switch(y=parseInt(e.value)){case 0:v.attr("disabled",!1),c.show();var t=d.val(h);o(t.range_at,!1,f,h);break;case 1:v.attr("disabled",!0),c.hide(),o([0,1,2,3,4,5,6],!1,f,h)}}),e("setting_time_limited_form")});