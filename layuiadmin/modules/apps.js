/** layui-admin.std-v1.4.0 LPPL License By https://www.layui.com/layuiadmin/ */
 ;"use strict";layui.define(["table","form","op_common"],function(t){function e(){setCacheData("apiLists",s),setCacheData("apiCreate",p),setCacheData("apiUpdate",o),setCacheData("apiDelete",r)}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={};t.status.map(function(t,e){i[e]=t}),renderSelect("app_id","app_id",t.apps,e.app_id),renderSelect("device_type","device_type",t.device_type,e.device_type),renderSelect("status","status",i,e.status),d.render()}var a=layui.$,l=layui.op_common,n=layui.table,d=layui.form,s=layui.api.apps_get_apps_lists,p=layui.api.apps_create_app,o=layui.api.apps_update_app,r=layui.api.apps_delete_app;a(".op-methods").on("click",function(t){e(),window[a(this).data("type")](t.data,n.cache["extends"])}),n.on("tool(lists)",function(t){e(),window[t.event]?window[t.event].call(this,t.data,n.cache["extends"]):""}),window.product_lists=function(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;layer.open({type:2,title:"商品列表",content:layui.setter.vhtml+"products/list.html?app_id="+t.id,maxmin:!0,area:["70%","70%"]})},window.push=function(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;layer.open({type:2,title:"推送设置",content:layui.setter.vhtml+"user/user/log-list.html?id="+t.id,maxmin:!0,area:["70%","70%"]})},window.logs=function(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;layer.open({type:2,title:"应用用户日志",content:layui.setter.vhtml+"user/user/log-list.html?id="+t.id,maxmin:!0,area:["70%","70%"]})},window.install_lists=function(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;layer.open({type:2,title:"安装统计",content:layui.setter.vhtml+"analysis/install-list.html?app_id="+t.id,maxmin:!0,area:["70%","70%"]})};var u=layui.opTable.render({elem:"#lists",url:s,headers:{token:layui.data(layui.setter.tableName).user.token},parseData:function(t){return checkApiStatusByData(t),getListsFormatByData(t)},toolbar:!0,defaultToolbar:["filter"],cols:[[{type:"checkbox"},{field:"id",width:90,title:"ID",sort:!0},{field:"name",title:"应用名称"},{field:"device_type",width:90,title:"设备类型",templet:"#tpl_device_type",align:"center"},{field:"version",width:75,title:"版本号"},{field:"html_switch",width:90,title:"H5开关",templet:"#tpl_html_switch",align:"center"},{field:"is_maintain",width:90,title:"维护开关",templet:"#tpl_is_maintain",align:"center"},{field:"pay_maintain",width:90,title:"支付维护",templet:"#tpl_pay_maintain",align:"center"},{field:"status",width:75,title:"状态",templet:"#tpl_status",align:"center"},{field:"updated_at",title:"更新时间",width:165,sort:!0,templet:function(t){return changeUTCTime(t.updated_at)}},{title:"操作",width:300,align:"center",fixed:"right",toolbar:"#options"}]],openColumnIndex:1,openCols:[{field:"bundle_id",title:"bundleId"},{field:"en_name",title:"应用标识"},{field:"channel",title:"渠道"},{field:"html_url",width:90,title:"H5地址",templet:function(t){var e='<span class="opTable-item-title">H5地址：</span>';return t.html_url?e+'<a href="'+t.html_url+'" class="layui-badge" target="_blank" title="'+t.html_url+'">'+t.html_url+"</a>":e+"无"}}],page:!0,limit:20,done:function(t){n.cache["extends"]=t["extends"],i(t["extends"])}});d.on("submit(search)",function(t){e(),window.data=t.data,u.reload({where:l.verifyField(t.field),page:{curr:1},done:function(e){i(e["extends"],t.field)}})}),t("apps",{}),t("const",{STATUS_LOCK:0,STATUS_NORMAL:1,DEVICE_TYPE_ANDROID:1,DEVICE_TYPE_IOS:2,DEVICE_TYPE_PC:3})});