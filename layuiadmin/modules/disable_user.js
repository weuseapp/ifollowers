/** layui-admin.std-v1.4.0 LPPL License By https://www.layui.com/layuiadmin/ */
 ;"use strict";layui.define(["user"],function(t){function e(){setCacheData("apiLists",l),setCacheData("apiDetails",r)}var a=layui.$,i=(layui.admin,layui.table),n=layui.form,d=getUrlParams(location.search),l=layui.api.user_get_user_lists+"?status=0&user_id="+d.user_id,r=layui.api.user_get_user_details;layui.api.update_user_status;n.on("submit(search)",function(t){e(),window.data=t.data,i.reload("lists",{where:t.field,page:{curr:1},done:function(e){initSearchInput(e["extends"],t.field)}})}),a(".op-methods").on("click",function(t){e(),window.data=t.data,window[a(this).data("type")](t.data,i.cache["extends"])}),i.on("tool(lists)",function(t){e(),window.data=t.data,window[t.event](t.data,i.cache["extends"])}),i.render({elem:"#lists",url:l,headers:{token:layui.data(layui.setter.tableName).user.token},parseData:function(t){return window.parent.listData=t,checkApiStatusByData(t),getListsFormatByData(t)},cols:[[{field:"id",width:100,title:"ID",sort:!0},{field:"related_type",title:"用户类型",minWidth:100,templet:"#tpl_related_type",align:"center"},{field:"app_name",title:"应用名称",minWidth:120,templet:function(t){var e=parent.listData.data["extends"].apps[t.app_id];return void 0!==e?e:"未知"}},{field:"related_id",title:"关联ID",minWidth:100},{field:"username",title:"用户名",minWidth:100,templet:"#tpl_username"},{field:"avatar",title:"头像",width:100,templet:"#tpl_img"},{field:"email",title:"邮箱"},{field:"platform",width:90,title:"来源设备",templet:"#tpl_platform",align:"center"},{field:"status",width:75,title:"状态",templet:"#tpl_status",align:"center"},{field:"created_at",title:"创建时间",width:175,sort:!0,templet:function(t){return changeUTCTime(t.created_at)}},{field:"updated_at",title:"更新时间",width:175,sort:!0,templet:function(t){return changeUTCTime(t.updated_at)}},{title:"操作",width:120,align:"center",fixed:"right",toolbar:"#options"}]],page:!0,limit:20,done:function(t){i.cache["extends"]=t["extends"],initSearchInput(t["extends"])}}),initSearchInput=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};renderSelect("app_id","app_id",t.apps,e.app_id),renderSelect("platform","platform",t.platform,e.platform),n.render()},details=function(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;layer.open({type:2,title:"详细",content:"details.html",maxmin:!0,area:["70%","70%"],success:function(e,i){window[e.find("iframe")[0].name].a_data={},window[e.find("iframe")[0].name].a_data.data=t;var n=ajaxRequest(getCacheData("apiDetails"),"get",{id:t.id},!1).responseJSON;a.each(n.data,function(t,e){})}})},t("disable_user"),t("const",{STATUS_LOCK:0,STATUS_NORMAL:1,TYPE_IG:1,TYPE_MEGALIKE_PC:2,PLATFORM_UNKNOWN:0,PLATFORM_PC:1,PLATFORM_APPLE:2,PLATFORM_ANDROID:3,PLATFORM_WEUSE:4})});